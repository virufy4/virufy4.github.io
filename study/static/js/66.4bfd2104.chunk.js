(this["webpackJsonpvirufy-study"]=this["webpackJsonpvirufy-study"]||[]).push([[66],{218:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var o=n(226),a=n(204),r=n(9),i=n.n(r),l=n(206),u=n(205);function c(){var e=Object(l.a)(["\n  height: 50px; \n  font-family: 'Source Sans Pro'; /* It could be removed if default on body changes */\n  color: ",";\n  width: 100%;\n  padding: 0 20px;\n  border: none;\n  background-color: ",";\n  border-top: 1px "," solid;\n  border-bottom: 1px "," solid;\n  ::placeholder {\n    color: ",";\n  }\n  @media screen and (","){\n    text-align: center;\n  }\n"]);return c=function(){return e},e}function s(){var e=Object(l.a)(["\n  position: relative;\n  display: inline-block;\n  width: calc(100% + 40px);\n  margin: 0 -20px;\n\n  @media screen and (","){\n    max-width: 470px;\n  }\n"]);return s=function(){return e},e}function d(){var e=Object(l.a)(["\n  width: 22px;\n  height: 22px; \n  border-radius: ",";\n  border: 3px solid ",";\n  position: absolute;\n  right: 0;\n  top: 0;\n  margin-top: 14px;\n  margin-right: 29px;\n  \n  @media screen and (","){\n    margin-right: 31px;\n  }\n\n  &:after{\n    content: '';\n    position: absolute; \n    left: ","; \n    top: ",";\n    height: ",";\n    width: ",";\n    border-radius: ",";\n    background-color: ","; \n    display: ",";\n    background-image: url(\"data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 16 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.0005 2L6.00018 10L2 6.00018' stroke='%233578DE' stroke-width='2.18192' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E\");\n    background-repeat: no-repeat;\n    background-size: 16px 16px;\n  }\n"]);return d=function(){return e},e}function p(){var e=Object(l.a)(["\n  font-weight: bold;\n"]);return p=function(){return e},e}function v(){var e=Object(l.a)(["\n  display: block;\n  width: 250px;\n  @media screen and (","){\n    width: auto;\n    text-align: left;\n    margin: auto;\n  }\n"]);return v=function(){return e},e}function b(){var e=Object(l.a)(["\n  width: 100%;\n  height: 50px;\n  position: relative;\n  font-family: 'Source Sans Pro'; /* It could be removed if default on body changes */\n  color: ",";\n  font-size: 14px;\n  text-align: left;\n  padding: 0 20px;\n  margin: 3px auto;\n  border: none;\n  border-radius: 10px;\n  background-color: ",";\n  @media screen and (","){\n    max-width: 470px;\n    text-align: left;\n  }\n"]);return b=function(){return e},e}var m=u.default.button(b(),(function(e){return e.theme.colors.darkBlack}),(function(e){return e.isSelected?e.theme.colors.purple_10:e.theme.colors.mercury}),(function(e){return e.theme.breakpoints.tablet})),h=u.default.span(v(),(function(e){return e.theme.breakpoints.tablet})),f=Object(u.default)(m)(p()),g=u.default.div(d(),(function(e){return e.checkbox?"10%":"50%"}),(function(e){return e.isSelected?e.theme.colors.purple:"#C1C1C1"}),(function(e){return e.theme.breakpoints.tablet}),(function(e){return e.checkbox?"0%":"2px"}),(function(e){return e.checkbox?"0%":"2px"}),(function(e){return e.checkbox?"16px":"12px"}),(function(e){return e.checkbox?"16px":"12px"}),(function(e){return e.checkbox?"0%":"50%"}),(function(e){return e.checkbox?e.theme.colors.purple_10:e.theme.colors.purple}),(function(e){return e.isSelected?"block":"none"})),y=u.default.div(s(),(function(e){return e.theme.breakpoints.tablet})),k=u.default.input(c(),(function(e){return e.theme.colors.darkBlack}),(function(e){return e.isSelected?e.theme.colors.green_25:"transparent"}),(function(e){return e.theme.colors.darkBlack_04}),(function(e){return e.theme.colors.darkBlack_04}),(function(e){return e.theme.colors.midDarkGray}),(function(e){return e.theme.breakpoints.tablet})),x={selected:[],other:""},S=function(e){var t=e.value,n=void 0===t?x:t,l=e.items,u=e.excludableValues,c=e.singleSelection,s=e.isCheckbox,d=e.onChange,p=e.allowAddOther,v=e.addOtherLabel,b=e.enableOther,S=e.otherPlaceholder,C=Object(r.useState)(!1),O=Object(a.a)(C,2),j=O[0],T=O[1];Object(r.useEffect)((function(){T(!!b||!!(null===n||void 0===n?void 0:n.other))}),[n,b]);var w=function(e){var t,o=n.selected;t=c||u&&o.some((function(e){return u.includes(e)}))?[]:o,d&&d({selected:t,other:e}),e||T(!1)};return i.a.createElement(i.a.Fragment,null,l.map((function(e,t){var a,r=null===n||void 0===n||null===(a=n.selected)||void 0===a?void 0:a.includes(e.value);return i.a.createElement(m,{key:e.value,lastItem:l.length===t+1&&!p&&!b,onClick:function(){return function(e){var t,a,r=n.selected,i=n.other,l=r.indexOf(e.value);l>=0?(t=[].concat(Object(o.a)(r.slice(0,l)),Object(o.a)(r.slice(l+1))),a=i):c||(null===u||void 0===u?void 0:u.includes(e.value))||u&&r.some((function(e){return u.includes(e)}))?(t=[e.value],a=void 0):(t=[].concat(Object(o.a)(r),[e.value]),a=i),d&&d({selected:t,other:a})}(e)},isSelected:r},i.a.createElement(h,null,e.label),i.a.createElement(g,{isSelected:r,checkbox:s}))})),p&&!j&&i.a.createElement(f,{onClick:function(){T(!0)},lastItem:!0},v),j&&i.a.createElement(y,null,i.a.createElement(k,{placeholder:S,value:(null===n||void 0===n?void 0:n.other)||"",isSelected:!!(null===n||void 0===n?void 0:n.other),onChange:function(e){return w(e.target.value)}}),!!(null===n||void 0===n?void 0:n.other)&&i.a.createElement(g,null)))};S.defaultProps={value:x,excludableValues:void 0,singleSelection:!1,onChange:void 0,allowAddOther:!1,addOtherLabel:"",enableOther:!1,otherPlaceholder:""};var C=i.a.memo(S)},223:function(e,t,n){"use strict";var o=n(9),a=n(207),r=n(208);t.a=function(e,t){var n=Object(a.d)(Object(r.b)(e)).state,i=Object(o.useMemo)((function(){var o={total:null===t||void 0===t?void 0:t.total,current:null===t||void 0===t?void 0:t.current};if(n[e]){var a,r,i,l,u,c,s=null===(a=n["submit-steps"])||void 0===a||null===(r=a.typeCovidFlu)||void 0===r?void 0:r.selected.includes("antigenTaken"),d=null===(i=n["submit-steps"])||void 0===i||null===(l=i.typeCovidFlu)||void 0===l?void 0:l.selected.includes("PCRTaken"),p=null===(u=n["submit-steps"])||void 0===u||null===(c=u.typeCovidFlu)||void 0===c?void 0:c.selected.includes("fluTaken");switch(!0){case s&&!d&&!p:o.total=(null===t||void 0===t?void 0:t.total)-2-2,o.current=(null===t||void 0===t?void 0:t.current)-2-2;break;case s&&d&&!p||s&&!d&&p:o.total=(null===t||void 0===t?void 0:t.total)-2,o.current=(null===t||void 0===t?void 0:t.current)-2;break;case!s&&!d&&!p:o.total=(null===t||void 0===t?void 0:t.total)-1-2-2,o.current=(null===t||void 0===t?void 0:t.current)-1-2-2;break;case!s&&d&&p:o.total=(null===t||void 0===t?void 0:t.total)-1,o.current=(null===t||void 0===t?void 0:t.current)-1;break;case!s&&!d&&p||!s&&d&&!p:o.total=(null===t||void 0===t?void 0:t.total)-1-2,o.current=(null===t||void 0===t?void 0:t.current)-1-2}}return o}),[n,t,e]),l=Object(o.useMemo)((function(){if(n[e]){var t,o,a,r=null===(t=n["submit-steps"].typeCovidFlu)||void 0===t?void 0:t.selected.includes("PCRTaken"),l=null===(o=n["submit-steps"].typeCovidFlu)||void 0===o?void 0:o.selected.includes("antigenTaken"),u=null===(a=n["submit-steps"].typeCovidFlu)||void 0===a?void 0:a.selected.includes("fluTaken");return r&&!l&&!u||r&&l&&!u?i.current+2:i.current}return 0}),[n,e,i]);return{customSteps:i,customCurrentStepPCR:l}}},245:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n(9),a=n.n(o),r=n(260),i=n(863),l=n(17),u=n(206);function c(){var e=Object(u.a)(["\n  margin: 20px 0;\n  \n  div {\n    margin: auto;\n  }\n"]);return c=function(){return e},e}var s=n(205).default.div(c()),d=function(e){var t=e.onChange,n=e.setRecaptchaAvailable,o=Object(i.a)().i18n;return a.a.createElement(s,null,a.a.createElement(r.a,{sitekey:"6LcRhdIZAAAAAOI8zafkWF0N5SYOUjMszuEUnrJT",onChange:t,onErrored:function(){n(!1),l.a("Error on ReCAPTCHA")},hl:o.language}))}},250:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var o=n(278),a=n.n(o).a.create({baseURL:"https://lwdzsrlhnk.execute-api.us-east-2.amazonaws.com/prod"});function r(){return a}},281:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(216),a=n.n(o),r=n(217),i=n(250),l=n(220),u=n(252),c=function(){return{isBrowser:u.isBrowser?Object(u.deviceDetect)():null,isMobile:u.isMobile?Object(u.deviceDetect)():null,isSmartTv:u.isSmartTV?Object(u.deviceDetect)():null,isConsole:u.isConsole?Object(u.deviceDetect)():null,isTablet:u.isTablet?Object(u.deviceDetect)():null,isWearable:u.isWearable?Object(u.deviceDetect)():null}};function s(e){return d.apply(this,arguments)}function d(){return(d=Object(r.a)(a.a.mark((function e(t){var n,o,r,u,s,d,p,v,b,m,h,f,g,y,k,x,S,C,O,j,T,w,E,D,R,q,F,A,B,I,M,P,L,J,V,z,_,G,W,Y,N,U,H,K,Q,Z,X,$,ee,te,ne,oe,ae,re,ie,le,ue,ce;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.setSubmitError,o=t.state,r=t.captchaValue,u=t.action,s=t.nextStep,d=t.setActiveStep,p=t.history,v=t.userCookie,e.prev=1,n(null),k=o.welcome,x=k.language,S=k.country,C=k.region,O=k.patientId,j=k.agreedConsentTerms,T=k.agreedPolicyTerms,w=k.agreedCovidDetection,E=k.agreedCovidCollection,D=k.agreedTrainingArtificial,R=k.agreedBiometric,q=o["submit-steps"],F=q.recordYourCough,A=q.recordYourBreath,B=q.recordYourSpeech,I=q.typeCovidFlu,M=q.testTaken,P=q.pcrTestDate,L=q.pcrTestResult,J=q.antigenTestDate,V=q.whatAntigenTestResult,z=q.antigenTestResult,_=q.vaccine,G=q.ageGroup,W=q.gender,Y=q.ethnicity,N=q.biologicalSex,U=q.smokeLastSixMonths,H=q.currentSymptoms,K=q.symptomsStartedDate,Q=q.currentRespiratoryCondition,Z=q.currentMedicalCondition,X=q.covidTimes,$=q.lastTimeCovidMonths,ee=q.fluTestDate,te=q.fluTestResult,ne=q.whenFluShot,(oe=new FormData).append("device",JSON.stringify(c())),oe.append("language",x),oe.append("country",S),C&&oe.append("region",C),O&&oe.append("patientId",O),window.sourceCampaign&&oe.append("source",window.sourceCampaign),v&&oe.append("userCookie",JSON.stringify(v)),oe.append("agreedConsentTerms",j),oe.append("agreedPolicyTerms",T),oe.append("agreedCovidCollection",E),oe.append("agreedCovidDetection",w),oe.append("agreedTrainingArtificial",D),oe.append("agreedBiometric",R),ae=F.recordingFile||F.uploadedFile,oe.append("cough",ae,ae.name||"filename.wav"),re=A.recordingFile||A.uploadedFile,oe.append("breath",re,re.name||"filename_breath.wav"),l.b.includes(S)&&(ie=B.recordingFile||B.uploadedFile,oe.append("voice",ie,ie.name||"filename_voice.wav")),(null===I||void 0===I||null===(b=I.selected)||void 0===b?void 0:b.length)>0&&oe.append("typeCovidFlu",I.selected.join(",")),M&&oe.append("testTaken",M.join(",")),M&&M.includes("pcr")&&(oe.append("pcrTestDate",P.toISOString()),oe.append("pcrTestResult",L)),M&&M.includes("antigen")&&(oe.append("antigenTestDate",J.toISOString()),oe.append("antigenTestResult",z),oe.append("whatAntigenTestResult",V)),_&&oe.append("vaccine",_),G&&oe.append("ageGroup",G),le=W.other||W.selected[0],(null===Y||void 0===Y||null===(m=Y.selected)||void 0===m?void 0:m.length)>0&&oe.append("ethnicity",Y.selected.join(",")),le&&oe.append("gender",le),N&&oe.append("biologicalSex",N),U&&oe.append("smokeLastSixMonths",U),(null===H||void 0===H||null===(h=H.selected)||void 0===h?void 0:h.length)>0&&oe.append("currentSymptoms",H.selected.join(",")),K&&oe.append("symptomsStartedDate",K),(null===Q||void 0===Q||null===(f=Q.selected)||void 0===f?void 0:f.length)>0&&oe.append("currentRespiratoryCondition",Q.selected.join(",")),(null===Z||void 0===Z||null===(g=Z.selected)||void 0===g?void 0:g.length)>0&&oe.append("currentMedicalCondition",Z.selected.join(",")),(null===H||void 0===H?void 0:H.other)&&oe.append("otherSymptoms",null===H||void 0===H?void 0:H.other),(null===Q||void 0===Q?void 0:Q.other)&&oe.append("otherRespiratoryConditions",null===Q||void 0===Q?void 0:Q.other),(null===Z||void 0===Z?void 0:Z.other)&&oe.append("otherMedicalConditions",null===Z||void 0===Z?void 0:Z.other),J&&oe.append("antigenTestDate",J.toISOString()),z&&oe.append("antigenTestResult",z),P&&(oe.append("pcrTestDate",P.toISOString()),oe.append("pcrTestResult",L)),X&&oe.append("covidTimes",X),$&&oe.append("lastTimeCovidMonths",$),ee&&oe.append("fluTestDate",ee.toISOString()),te&&oe.append("fluTestResult",te),ne&&oe.append("whenFluShot",ne),r&&oe.append("captchaValue",r),e.next=53,i.a.post("saveSurvey",oe,{headers:{"Content-Type":"multipart/form-data; boundary=SaveSurvey"}});case 53:ue=e.sent,u({}),s&&(null===(y=ue.data)||void 0===y?void 0:y.submissionId)&&(d(!1),p.push(s,{submissionId:null===(ce=ue.data)||void 0===ce?void 0:ce.submissionId})),e.next=62;break;case 58:e.prev=58,e.t0=e.catch(1),console.log(e.t0),n("beforeSubmit:submitError");case 62:case"end":return e.stop()}}),e,null,[[1,58]])})))).apply(this,arguments)}},309:function(e,t,n){"use strict";n.r(t);var o=n(216),a=n.n(o),r=n(217),i=n(204),l=n(9),u=n.n(l),c=n(242),s=n(219),d=n.n(s),p=n(863),v=n(255),b=n(865),m=n(209),h=n(207),f=n(221),g=n(213),y=n(222),k=n(208),x=n(245),S=n(227),C=n(210),O=n(223),j=n(211),T=n(281),w=n(220),E=n(218),D=n(215),R=n(224),q=y.object({currentRespiratoryCondition:y.object({selected:y.array().required()})}).defined();t.default=u.a.memo((function(e){var t,n,o=e.previousStep,s=e.nextStep,y=e.storeKey,F=e.metadata,A=d()({bindTo:document&&document.getElementById("wizard-buttons")}).Portal,B=Object(C.a)(),I=B.setDoGoBack,M=B.setTitle,P=B.setType,L=Object(c.g)(),J=Object(p.a)().t,V=Object(h.d)(Object(k.b)(y)),z=V.state,_=V.action,G=Object(b.a)(["virufy-study-user"]),W=Object(i.a)(G,1)[0],Y=Object(w.e)(),N=Object(w.d)(),U=Object(O.a)(y,F).customSteps,H=W["virufy-study-user"],K=u.a.useState(!0),Q=Object(i.a)(K,2),Z=Q[0],X=Q[1],$=u.a.useState(null),ee=Object(i.a)($,2),te=ee[0],ne=ee[1],oe=u.a.useState(null),ae=Object(i.a)(oe,2),re=ae[0],ie=ae[1],le=u.a.useState(!0),ue=Object(i.a)(le,2),ce=ue[0],se=ue[1],de=Object(m.e)({mode:"onChange",defaultValues:null===z||void 0===z?void 0:z[y],resolver:Object(f.a)(q)}),pe=de.control,ve=de.handleSubmit,be=de.formState,me=be.errors,he=be.isSubmitting,fe=be.isValid,ge=u.a.useCallback((function(){X(!1),o?L.push(o):L.goBack()}),[L,o]);Object(l.useEffect)((function(){Object(j.a)(),M("".concat(J("questionary:respiration.title"))),P("primary"),I((function(){return ge}))}),[ge,I,M,P,F,J]);var ye=function(){var e=Object(r.a)(a.a.mark((function e(t){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}if((null!==(n=null===F||void 0===F?void 0:F.current)&&void 0!==n?n:5)!==(null!==(o=null===F||void 0===F?void 0:F.total)&&void 0!==o?o:6)&&("Japan"!==N||Y)){e.next=6;break}return e.next=4,Object(T.a)({setSubmitError:function(e){return ne(e?J(e):null)},state:z,captchaValue:re,action:_,nextStep:s,setActiveStep:X,history:L,userCookie:H});case 4:e.next=8;break;case 6:_(t),s&&(X(!1),L.push(s));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=u.a.useCallback((function(){return J("Japan"!==N||Y?"questionary:nextButton":he?"questionary:submitting":"beforeSubmit:submitButton")}),[N,he,Y,J]),xe=u.a.useMemo((function(){return"Japan"===N?[{value:"none",label:J("questionary:respiration.options.none")},{value:"asthma",label:J("questionary:respiration.options.asthma")},{value:"pneumonia",label:J("questionary:respiration.options.pneumonia")},{value:"tuberculosis",label:J("questionary:respiration.options.tuberculosis")},{value:"copdEmphysema",label:J("questionary:respiration.options.emphysema")},{value:"pulmonaryFibrosis",label:J("questionary:respiration.options.pulmonaryFibrosis")},{value:"cysticFibrosis",label:J("questionary:respiration.options.cysticFibrosis")},{value:"chronicRespiratoryDisease",label:J("questionary:respiration.options.chronicRespiratoryDisease")},{value:"chronicLungDiseases",label:J("questionary:respiration.options.chronicLungDiseases")},{value:"coughOtherConditions",label:J("questionary:respiration.options.coughOtherConditions")},{value:"other",label:J("questionary:medical.options.other")}]:[{value:"none",label:J("questionary:respiration.options.none")},{value:"asthma",label:J("questionary:respiration.options.asthma")},{value:"bronchitis",label:J("questionary:respiration.options.bronchitis")},{value:"copdEmphysema",label:J("questionary:respiration.options.emphysema")},{value:"pneumonia",label:J("questionary:respiration.options.pneumonia")},{value:"tuberculosis",label:J("questionary:respiration.options.tuberculosis")},{value:"other",label:J("questionary:medical.options.other")}]}),[N,J]);return u.a.createElement(R.MainContainer,null,u.a.createElement(S.a,{currentStep:U.current,totalSteps:U.total,progressBar:!0}),u.a.createElement(R.QuestionText,{bold:!1},u.a.createElement(v.a,{i18nKey:"questionary:respiration.question"},u.a.createElement("strong",null,"Which of the below respiratory conditions do you currently have?")),u.a.createElement(R.QuestionAllApply,null,J("questionary:allThatApply"))),u.a.createElement(m.a,{control:pe,name:"currentRespiratoryCondition",defaultValue:{selected:[],other:""},render:function(e){var t=e.onChange,n=e.value;return u.a.createElement(E.a,{isCheckbox:!0,value:n,onChange:function(e){return t(e)},items:xe,excludableValues:["none"]})}}),u.a.createElement(g.a,{errors:me,name:"currentRespiratoryCondition",render:function(e){var t=e.message;return u.a.createElement("p",null,t)}}),Z&&u.a.createElement(A,null,((null!==(t=null===F||void 0===F?void 0:F.current)&&void 0!==t?t:5)===(null!==(n=null===F||void 0===F?void 0:F.total)&&void 0!==n?n:6)||"Japan"===N&&!Y)&&u.a.createElement(x.a,{onChange:ie,setRecaptchaAvailable:se}),te&&u.a.createElement(R.TempBeforeSubmitError,null,te),u.a.createElement(D.a,{invert:!0,leftLabel:ke(),leftHandler:ve(ye),leftDisabled:"Japan"!==N||Y?!fe||!ce:he||ce&&!re||!fe})))}))}}]);
//# sourceMappingURL=66.4bfd2104.chunk.js.map