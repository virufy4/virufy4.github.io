(this["webpackJsonpmtd-app"]=this["webpackJsonpmtd-app"]||[]).push([[14,41],{187:function(t,n,e){"use strict";e.d(n,"a",(function(){return f}));var r=e(194),a=e(6),o=e.n(a),i=e(183),u=e(182),c=e(184);function l(){var t=Object(i.a)(["\n  height: 50px;\n  border-radius: 15px; \n  font-family: 'Source Sans Pro'; /* It could be removed if default on body changes */\n  font-weight: bold;\n  font-size: 14px;\n  font-weight: bold;\n  width: 100%;\n\n  ","\n"]);return l=function(){return t},t}var s=u.default.button(l(),(function(t){var n=t.dark,e=t.disabled?c.a.purple_50:c.a.purple;return n?"\n    background-color: ".concat(e,";\n    color: ").concat(c.a.white,";\n    border: none;\n  "):"\n    background-color: ".concat(c.a.white,";\n    color: ").concat(e,";\n    border: 1px solid ").concat(e,";\n  ")})),f=o.a.memo((function(t){var n=t.children,e=Object(r.a)(t,["children"]);return o.a.createElement(s,Object.assign({type:"button"},e),n)}))},189:function(t,n,e){"use strict";e.d(n,"a",(function(){return S})),e.d(n,"b",(function(){return x})),e.d(n,"c",(function(){return y})),e.d(n,"d",(function(){return E}));var r=e(186),a=e(185),o=e(6),i=function(t,n){var e=t.getItem(n);try{return e?JSON.parse(e):void 0}catch(r){return}};function u(t,n){var e=n||"__STATE_MACHINE__",r=i(t,e);return{set:function(t){r=t},get:function(){return r},getName:function(){return e}}}var c=function(t){return void 0===t};function l(t,n,e,r){"undefined"!==typeof window&&t&&(window.STATE_MACHINE_DEBUG=function(t){return n.setItem("___STATE_MACHINE_DEBUG__",t)},window.STATE_MACHINE_RESET=function(){return n.clear()},window.STATE_MACHINE_GET_STORE=function(){return n.getItem(e())},window.STATE_MACHINE_SAVE_TO=function(t){return window.localStorage.setItem(t,JSON.stringify(r()))},window.STATE_MACHINE_LOAD=function(t){var r=t.storeName,a=t.data;return n.setItem(e()||"___STATE_MACHINE_DEBUG__",a||window.localStorage.getItem(r)||"")})}var s=Object(o.createContext)({store:{},updateStore:function(t){return t}}),f=function(t){var n=t.transform,e=t.externalStoreName,r=t.storageType,a=t.store;return n({externalStoreData:i(r,e),currentStoreData:a})};function d(t,n,e){var o=t,u=n.syncStores;if(!u)return o;try{if(Array.isArray(u))u.forEach((function(t){o=f({transform:t.transform,externalStoreName:t.externalStoreName,storageType:e,store:o})}));else{if(u.externalStoreName&&"function"===typeof u.transform&&"string"===typeof u.externalStoreName)return f({transform:u.transform,externalStoreName:u.externalStoreName,storageType:e,store:o});Object.entries(u).forEach((function(t){var n=Object(a.a)(t,2),u=n[0],c=n[1],l=i(e,u);c.forEach((function(t){o=Object.assign(Object.assign({},o),Object(r.a)({},t,Object.assign(Object.assign({},o[t]),l[t])))}))}))}}catch(c){return o}return o}var m,p,b,g="undefined"!==typeof window,v=g?window.sessionStorage:{getItem:function(t){return t},setItem:function(t){return t},clear:function(){},length:0,key:function(t){return t.toString()},removeItem:function(){}},h=[];function y(t){v=t}function x(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{name:"__STATE_MACHINE__",middleWares:[],syncStores:void 0},e=n?n.name:"__STATE_MACHINE__",r=u(v,e);b=r.getName,m=r.get,p=r.set,h=n.middleWares,l(!1,v,b,m),p(d(m()||t,n,v))}function S(t){var n=Object(o.useState)(m()),e=Object(a.a)(n,2),r=e[0],i=e[1],u=Object(o.useMemo)((function(){return{store:r,updateStore:i}}),[r]);return Object(o.createElement)(s.Provider,Object.assign({value:u},t))}var j=function(t){var n=t.options,e=t.callback,r=t.updateStore;return function(t){var a;e&&e.name;if(e&&(a=e(m(),t)),p(c(a)?m():a),v.setItem(b(),JSON.stringify(m())),c(n)||n&&!1!==n.shouldReRenderApp){var o=m();Array.isArray(h)&&h.length&&(o=h.reduce((function(t,n){return n(t)||t}),o)),r(o)}}};function E(t,n){var e=Object(o.useContext)(s),i=e.store,u=e.updateStore;return t&&Object.keys(t).length?{actions:Object.entries(t).reduce((function(t,e){var i=Object(a.a)(e,2),c=i[0],l=i[1];return Object.assign(Object.assign({},t),Object(r.a)({},c,Object(o.useCallback)(j({options:n,callback:l,updateStore:u}),[])))}),{}),action:function(t){return t},state:i}:{actions:{},action:Object(o.useCallback)(t?j({options:n,callback:t,updateStore:u}):function(){},[]),state:i}}},190:function(t,n,e){"use strict";var r=e(6),a=e.n(r),o=e(211);n.a=function(){var t=a.a.useContext(o.a),n=t.title,e=t.setTitle,r=t.subtitle,i=t.setSubtitle,u=t.type,c=t.setType,l=t.logoSize,s=t.setLogoSize,f=t.setDoGoBack;return{title:n,setTitle:e,subtitle:r,setSubtitle:i,type:u,setType:c,logoSize:l,setLogoSize:s,doGoBack:t.doGoBack,setDoGoBack:f}}},191:function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));var r=function(){window.scrollTo({top:0,behavior:"smooth"})}},192:function(t,n,e){"use strict";e.d(n,"a",(function(){return s}));var r=e(6),a=e.n(r),o=e(187),i=e(183);function u(){var t=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  max-width: ",";\n  margin: 0 auto;\n\n  button {\n    flex: 1;\n    min-height: 50px;\n    margin-bottom: 8px;\n    text-align: center;\n\n    &:first-of-type {\n      margin-left: 0px !important;\n    }\n  }\n\n  @media screen and (","){\n    max-width: 470px;\n  }\n"]);return u=function(){return t},t}var c=e(182).default.div(u(),(function(t){return"calc(100% - ".concat(2*t.theme.layout.generalPaddingAmount,"px)")}),(function(t){return t.theme.breakpoints.tablet})),l=a.a.memo((function(t){var n=t.invert,e=void 0!==n&&n,r=t.leftLabel,i=t.leftDisabled,u=t.leftHandler,l=t.rightLabel,s=t.rightDisabled,f=t.rightHandler,d=t.className;return a.a.createElement(c,{className:d},a.a.createElement(o.a,{dark:e,disabled:i,onClick:u},r),l&&f&&a.a.createElement(o.a,{dark:!e,disabled:s,onClick:f},l))})),s=a.a.memo(l)},196:function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"a",(function(){return i}));var r=e(186),a=e(193);function o(t){return function(n,e){return Object(a.a)(Object(a.a)({},n),{},Object(r.a)({},t,Object(a.a)(Object(a.a)({},n[t]),e)))}}function i(){return function(t){return{welcome:{language:t.welcome.language}}}}},219:function(t,n,e){"use strict";e.d(n,"a",(function(){return a}));var r=e(232);function a(t,n){return new Promise((function(e){t.duration===1/0||r.isSafari&&!(r.isSafari&&t.duration>0)?(t.addEventListener("durationchange",(function(){n?t.remove():(t.pause(),t.volume=1,t.currentTime=0),e(t.duration)})),t.currentTime=86400,t.play()):e(t.duration)}))}},249:function(t,n,e){"use strict";n.a={sizeAsHuman:function(t,n){var e=n?1e3:1024;if(Math.abs(t)<e)return"".concat(t," B");var r=n?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=-1;do{t/=e,++a}while(Math.abs(t)>=e&&a<r.length-1);return"".concat(t.toFixed(1)," ").concat(r[a])},blobToFile:function(t,n){var e=t;return e.lastModifiedDate=new Date,e.name=n,t}}},303:function(t,n,e){"use strict";e.r(n);var r=e(186),a=e(199),o=e.n(a),i=e(200),u=e(185),c=e(6),l=e.n(c),s=e(197),f=e(202),d=e.n(f),m=e(792),p=e(189),b=e(190),g=e(192),v=e(196),h=e(191),y=e(249),x=e(219),S=e(769),j=e.n(S),E=e(770),O=e.n(E),T=e(771),w=e.n(T),P=e(304);n.default=l.a.memo((function(t){var n,e,a=t.storeKey,f=t.previousStep,S=t.nextStep,E=t.metadata,T=l.a.useMemo((function(){return!!E&&"recordYourCough"===E.currentLogic}),[E]),k=l.a.useMemo((function(){return!!E&&"recordYourBreath"===E.currentLogic}),[E]),B=d()({bindTo:document&&document.getElementById("wizard-buttons")}).Portal,_=Object(b.a)(),C=_.setDoGoBack,A=_.setTitle,M=_.setSubtitle,N=Object(s.g)(),L=Object(s.h)(),I=Object(p.d)(Object(v.b)(a)),z=I.state,H=I.action,D=Object(m.a)().t,G=(null===L||void 0===L||null===(n=L.state)||void 0===n?void 0:n.isShortAudioCollection)||!1,R=null===z||void 0===z||null===(e=z[a])||void 0===e?void 0:e[null===E||void 0===E?void 0:E.currentLogic],U=R?R.recordingFile||R.uploadedFile:null,F=l.a.useRef(null),J=l.a.useRef(),Y=l.a.useRef(0),K=l.a.useState(!0),W=Object(u.a)(K,2),Z=W[0],V=W[1],X=l.a.useState(!1),q=Object(u.a)(X,2),Q=q[0],$=q[1],tt=l.a.useState(0),nt=Object(u.a)(tt,2),et=nt[0],rt=nt[1],at=l.a.useState(0),ot=Object(u.a)(at,2),it=ot[0],ut=ot[1];l.a.useEffect((function(){var t=function(){!function t(n){ut(n/1e3),Y.current=n,J.current=setTimeout((function(){t(n+200)}),200)}(Y.current),setTimeout((function(){$(!0)}),0)},n=function(t){t.target.currentTime>=t.target.duration&&(ut(0),Y.current=0),$(!1),clearTimeout(J.current)},e=function(){var t=Object(i.a)(o.a.mark((function t(n){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(x.a)(n.target);case 2:e=t.sent,rt(e);case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();return F.current&&(F.current.addEventListener("playing",t),F.current.addEventListener("pause",n),F.current.addEventListener("loadedmetadata",e)),function(){F.current&&(F.current.removeEventListener("playing",t),F.current.removeEventListener("pause",n),F.current.removeEventListener("loadedmetadata",e))}}),[]);var ct=l.a.useMemo((function(){var t={fileUrl:"",fileName:"",fileSize:""};if(U&&void 0!==U.size)try{var n=URL.createObjectURL(U);t.fileUrl=n,t.fileName=U.name,t.fileSize=y.a.sizeAsHuman(U.size,!0)}catch(e){console.log("Error",e)}return t}),[U]),lt=ct.fileUrl,st=ct.fileName,ft=l.a.useCallback((function(){S&&(V(!1),N.push(S))}),[N,S]),dt=l.a.useCallback((function(){Q&&F.current&&F.current.pause(),V(!1),L.state&&L.state.from?T?N.push("/submit-steps/step-record/cough",{isShortAudioCollection:G}):k?N.push("/submit-steps/step-record/breath"):N.push("/submit-steps/step-record/speech"):f?N.push(f):N.goBack()}),[L.state,f,N,T,k,G,Q]),mt=l.a.useCallback((function(){Q&&F.current&&F.current.pause(),(null===z||void 0===z?void 0:z[a][null===E||void 0===E?void 0:E.currentLogic])&&(H(Object(r.a)({},null===E||void 0===E?void 0:E.currentLogic,{recordingFile:null,uploadFile:null})),dt())}),[Q,z,a,E,H,dt]),pt=l.a.useCallback((function(){Q||F.current&&F.current.play()}),[Q]),bt=l.a.useCallback((function(){Q&&F.current&&F.current.pause()}),[Q]);Object(c.useEffect)((function(){Object(h.a)(),M(D("recordingsListen:title")),A(D(T?"recordingsListen:recordCough.header":k?"recordingsListen:recordBreath.header":"recordingsListen:recordSpeech.header")),C((function(){return dt}))}),[dt,T,k,C,A,M,D]);var gt=l.a.useMemo((function(){var t={currentTime:"0:00",remainingTime:"0:00",trackProgress:0};if(et){var n=Math.floor(Math.floor(it)/60),e=Math.floor(it)-60*n;t.currentTime="".concat(n,":").concat(e<10?"0".concat(e):e);var r=et>it?Math.ceil(et-it):0,a=Math.floor(r/60),o=r-60*a;t.remainingTime="-".concat(a,":").concat(o<10?"0".concat(o):o),t.trackProgress=Math.ceil(it/et*100)}return t}),[et,it]),vt=gt.currentTime,ht=gt.remainingTime,yt=gt.trackProgress;return l.a.createElement(l.a.Fragment,null,lt&&l.a.createElement("audio",{ref:F},l.a.createElement("source",{src:lt})),l.a.createElement(P.MainContainer,null,l.a.createElement(P.Subtitle,null,D("recordingsListen:subtitle")),l.a.createElement(P.PlayerContainer,null,l.a.createElement(P.PlayerContainerTop,null,l.a.createElement(P.PlayerTopMiddle,null,l.a.createElement(P.TitleAudioName,null,st)),l.a.createElement(P.PlayerCrossContainer,{onClick:mt},l.a.createElement(P.PlayerCross,{src:w.a}))),l.a.createElement(P.PlayerContainerBottom,null,l.a.createElement(P.PlayerBottomTop,null,l.a.createElement(P.PlayerBottomTrack,{playing:Q,progress:yt}),l.a.createElement(P.PlayerBottomThumb,{playing:Q,progress:yt})),l.a.createElement(P.PlayerBottomBottom,null,l.a.createElement(P.PlayerTimeIndicator,null,vt),l.a.createElement(P.PlayerTimeIndicator,null,ht)))),l.a.createElement(P.PlayerPlayContainer,{onClick:Q?bt:pt},l.a.createElement(P.PlayerPlayButton,null,l.a.createElement(P.PlayerPlay,{src:Q?O.a:j.a})))),Z&&l.a.createElement(B,null,l.a.createElement(g.a,{invert:!0,leftLabel:D("recordingsListen:next"),leftHandler:ft})))}))},304:function(t,n,e){"use strict";e.r(n),e.d(n,"MainContainer",(function(){return T})),e.d(n,"PlayerContainer",(function(){return w})),e.d(n,"PlayerContainerTop",(function(){return P})),e.d(n,"PlayerPlayContainer",(function(){return k})),e.d(n,"PlayerCrossContainer",(function(){return B})),e.d(n,"PlayerContainerBottom",(function(){return _})),e.d(n,"PlayerTopMiddle",(function(){return C})),e.d(n,"PlayerBottomTop",(function(){return A})),e.d(n,"PlayerBottomTrack",(function(){return M})),e.d(n,"PlayerBottomThumb",(function(){return N})),e.d(n,"PlayerBottomBottom",(function(){return L})),e.d(n,"Subtitle",(function(){return I})),e.d(n,"TitleAudioName",(function(){return z})),e.d(n,"PlayerTimeIndicator",(function(){return H})),e.d(n,"PlayerPlayButton",(function(){return D})),e.d(n,"PlayerPlay",(function(){return G})),e.d(n,"PlayerCross",(function(){return R})),e.d(n,"BeforeSubmitText",(function(){return U})),e.d(n,"TempBeforeSubmitError",(function(){return F}));var r=e(183),a=e(182),o=e(184);function i(){var t=Object(r.a)(["\ncolor: ",";\n  text-align: center;\n  margin-bottom: 16px;\n"]);return i=function(){return t},t}function u(){var t=Object(r.a)(["\n  font-family: 'Source Sans Pro';\n  font-size: 14px;\n  line-height: 20px;\n  color: ",";\n  margin: 0;\n"]);return u=function(){return t},t}function c(){var t=Object(r.a)(["\n  width: 14px;\n  height: 14px;\n"]);return c=function(){return t},t}function l(){var t=Object(r.a)(["\n  width: 33px;\n  height: 40px;\n"]);return l=function(){return t},t}function s(){var t=Object(r.a)(["\n  width: 108px;\n  height: 108px;\n  background-color: ",";\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex; \n  align-items: center; \n  justify-content: center; \n"]);return s=function(){return t},t}function f(){var t=Object(r.a)(["\n  opacity: 0.5;\n  margin-top: 8px;\n  font-family: 'Source Sans Pro';\n  font-size: 0.875rem;\n  color: ",";\n  font-weight: 400;\n"]);return f=function(){return t},t}function d(){var t=Object(r.a)(["\n  color: ",';\n  font-size: 14px;\n  font-family: "Source Sans Pro";\n  text-align: left;\n']);return d=function(){return t},t}function m(){var t=Object(r.a)(["\n  color: ",';\n  font-size: 18px;\n  font-family: "Source Sans Pro";\n  text-align: left;\n  white-space: pre-wrap;\n  width: 100%;\n  margin-left: 20px;\n  margin-bottom: 60px;\n  \n  @media screen and (',") {\n    max-width: 592px;\n    margin-right: auto; \n    margin-left: auto; \n  }\n"]);return m=function(){return t},t}function p(){var t=Object(r.a)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n"]);return p=function(){return t},t}function b(){var t=Object(r.a)(["\n  position: absolute;\n  top: -6px;\n  left: ",";\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background-color: ",";\n  transform: translateX(-50%);\n  ","\n"]);return b=function(){return t},t}function g(){var t=Object(r.a)(["\n  position: relative;\n  width: 100%;\n  height: 4px;\n  background-color: ",";\n\n  &:after{\n    content: '';\n    position: absolute; \n    left: 0;\n    height: 4px;\n    background-color: ",";\n    width: ",";\n    ","\n\n  }\n"]);return g=function(){return t},t}function v(){var t=Object(r.a)(["\n  position: relative;\n  margin-bottom: 4px;\n"]);return v=function(){return t},t}function h(){var t=Object(r.a)(["\n  flex: 1;\n"]);return h=function(){return t},t}function y(){var t=Object(r.a)([""]);return y=function(){return t},t}function x(){var t=Object(r.a)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-end;\n  width: 22px;\n  padding-bottom: 22px;\n  margin-right: -20px;\n  padding-right: 20px;\n  box-sizing: content-box;\n  cursor: pointer;\n"]);return x=function(){return t},t}function S(){var t=Object(r.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  margin-top: 76px;\n"]);return S=function(){return t},t}function j(){var t=Object(r.a)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  margin-bottom: 10px;\n"]);return j=function(){return t},t}function E(){var t=Object(r.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 60px 20px 0px 20px;\n\n  @media screen and (",") {\n    max-width: 592px;\n    margin: 0 auto;\n  }\n"]);return E=function(){return t},t}function O(){var t=Object(r.a)(["\n  margin-bottom: 77px;\n\n  @media screen and (",") {\n    max-width: 470px;\n    margin: auto;\n  }\n"]);return O=function(){return t},t}var T=a.default.div(O(),(function(t){return t.theme.breakpoints.tablet})),w=a.default.div(E(),(function(t){return t.theme.breakpoints.tablet})),P=a.default.div(j()),k=a.default.div(S()),B=a.default.div(x()),_=a.default.div(y()),C=a.default.div(h()),A=a.default.div(v()),M=a.default.div(g(),o.a.purple_10,o.a.purple,(function(t){return t.progress?"".concat(t.progress,"%"):"0%"}),(function(t){return t.playing?"transition: width 0.2s linear;":""})),N=a.default.div(b(),(function(t){return t.progress?"".concat(t.progress,"%"):"0px"}),o.a.purple,(function(t){return t.playing?"transition: left 0.2s linear;":""})),L=a.default.div(p()),I=a.default.h2(m(),(function(t){return t.theme.colors.mineShaft}),(function(t){return t.theme.breakpoints.tablet})),z=a.default.p(d(),(function(t){return t.theme.colors.mineShaft})),H=a.default.p(f(),o.a.mineShaft),D=a.default.div(s(),o.a.purple_10),G=a.default.img(l()),R=a.default.img(c()),U=a.default.p(u(),(function(t){return t.theme.colors.darkGray_70})),F=Object(a.default)(U)(i(),(function(t){return t.theme.colors.red}))},769:function(t,n,e){t.exports=e.p+"static/media/play.6f092911.svg"},770:function(t,n,e){t.exports=e.p+"static/media/pause.d55011c8.svg"},771:function(t,n,e){t.exports=e.p+"static/media/cross.13e841fb.svg"}}]);
//# sourceMappingURL=14.53ce9a15.chunk.js.map